script#avl-table type="text/x-template" 
  template v-if="horizontal"
    table.avl-table
      thead
        tr
          th v-for="column in table.columns" :class="column.class"
            | {{ column.title }}
      
      tbody
        template v-for="line in table.lines"
          tr
            td v-for="column in table.columns" :class="line[column.key].class"
              | {{{ line[column.key].value }}}

  template v-if="vertical"
    table.avl-table  
      tbody
        template v-for="column in table.columns"
          tr
            td.avl-th :class="column.class"
              | {{ column.title }}
            td v-for="line in table.lines" :class="line[column.key].class"
              | {{{ line[column.key].value }}}
    
   
coffee:
  Vue.component('avl-table', {
    template: '#avl-table',
    props: [ 'dataUrl', 'dataSource', 'orientation' ],
    
    data: ()-> 
      {
        dataTable: { 
          pagination: {},
          columns: [],
          lines: []
        }
      }
    ,
    computed: {
      horizontal: ()->
        return this.orientation != "vertical"
        
      vertical: ()->
        return this.orientation == "vertical"
      
      table: ()->
        if this.dataSource?
          return (this.dataSource)
          
        if this.dataUrl?
          return (this.dataTable)
          
    }
    ,
    methods: {
      getData: ()->
        $.get(this.dataUrl).done((result) =>
          this.dataTable.columns = result.columns
          this.dataTable.lines = result.lines       
        )
    }
    ,
    created: ()->
      if this.dataUrl?
        this.getData()
  })
